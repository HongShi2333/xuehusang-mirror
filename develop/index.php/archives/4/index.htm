<!DOCTYPE HTML>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
    <meta charset="UTF-8">
	<meta name="viewport" content="width=device-width,user-scalable=no">
    <title>过往更新日志 - 冰屋日志</title>
	<!--[if lt IE 9]>
    <script src="http://x.libdd.com/farm1/a571d2/726ce276/html5shiv.js"></script>
    <![endif]-->
<script type="text/javascript" src="../../../../jquery/1.9.1/jquery.min.js"></script>
<script>var $caches="https://xuehusang.cn/develop/usr/themes/jiang/img/cache.json";</script>
<link rel="stylesheet" href="../../../usr/themes/jiang/Mac.css">
<link rel="stylesheet" href="../../../usr/themes/jiang/style.css">
<script src="../../../usr/themes/jiang/img/clipboard.min.js"></script>
<script src="../../../usr/themes/jiang/img/prism.full.js"></script>
<script src="../../../usr/themes/jiang/img/prism.js"></script>
<meta name="description" content="我们一天天度过的所谓日常，也许是接连不断发生的奇迹2021.02.03 合成大雪狐上线2021.02.06 域名xuehusang.cn接入合成萨摩2021.02.11 雪狐冰屋网站正式上线20...">
<link rel="pingback" href="../../action/xmlrpc">
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../action/xmlrpc.html?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../../action/xmlrpc-1.html?wlw">
<script type="text/javascript">
(function () {
    window.TypechoComment = {
        dom : function (id) {
            return document.getElementById(id);
        },
    
        create : function (tag, attr) {
            var el = document.createElement(tag);
        
            for (var key in attr) {
                el.setAttribute(key, attr[key]);
            }
        
            return el;
        },

        reply : function (cid, coid) {
            var comment = this.dom(cid), parent = comment.parentNode,
                response = this.dom('respond-post-4'), input = this.dom('comment-parent'),
                form = 'form' == response.tagName ? response : response.getElementsByTagName('form')[0],
                textarea = response.getElementsByTagName('textarea')[0];

            if (null == input) {
                input = this.create('input', {
                    'type' : 'hidden',
                    'name' : 'parent',
                    'id'   : 'comment-parent'
                });

                form.appendChild(input);
            }

            input.setAttribute('value', coid);

            if (null == this.dom('comment-form-place-holder')) {
                var holder = this.create('div', {
                    'id' : 'comment-form-place-holder'
                });

                response.parentNode.insertBefore(holder, response);
            }

            comment.appendChild(response);
            this.dom('cancel-comment-reply-link').style.display = '';

            if (null != textarea && 'text' == textarea.name) {
                textarea.focus();
            }

            return false;
        },

        cancelReply : function () {
            var response = this.dom('respond-post-4'),
            holder = this.dom('comment-form-place-holder'), input = this.dom('comment-parent');

            if (null != input) {
                input.parentNode.removeChild(input);
            }

            if (null == holder) {
                return true;
            }

            this.dom('cancel-comment-reply-link').style.display = 'none';
            holder.parentNode.insertBefore(response, holder);
            return false;
        }
    };
})();
</script>
<script type="text/javascript">
(function () {
    var event = document.addEventListener ? {
        add: 'addEventListener',
        triggers: ['scroll', 'mousemove', 'keyup', 'touchstart'],
        load: 'DOMContentLoaded'
    } : {
        add: 'attachEvent',
        triggers: ['onfocus', 'onmousemove', 'onkeyup', 'ontouchstart'],
        load: 'onload'
    }, added = false;

    document[event.add](event.load, function () {
        var r = document.getElementById('respond-post-4'),
            input = document.createElement('input');
        input.type = 'hidden';
        input.name = '_';
        input.value = (function () {
    var _j2etzJH = 'J'//'J'
+//'oL'
'1'+//'b1J'
'cca'+//'4mb'
'da'+'b5'//'2'
+'84'//'l'
+//'D5'
'D5'+//'E0M'
'016'+'c'//'Vq3'
+'ad'//'d'
+''///*'gui'*/'gui'
+'Woi'//'Woi'
+//'P92'
'60'+//'Re'
'1cd'+''///*'Gnr'*/'Gnr'
+'1'//'te'
+'HM1'//'HM1'
+//'01M'
'01M'+'ae'//'Lv'
+//'A'
'262'+'b'//'J'
+'3'//'YYE'
+''///*'fI'*/'fI'
+//'7k'
'02e', _vUdpr = [[0,1],[10,12],[16,19],[22,25],[22,25]];
    
    for (var i = 0; i < _vUdpr.length; i ++) {
        _j2etzJH = _j2etzJH.substring(0, _vUdpr[i][0]) + _j2etzJH.substring(_vUdpr[i][1]);
    }

    return _j2etzJH;
})();

        if (null != r) {
            var forms = r.getElementsByTagName('form');
            if (forms.length > 0) {
                function append() {
                    if (!added) {
                        forms[0].appendChild(input);
                        added = true;
                    }
                }
            
                for (var i = 0; i < event.triggers.length; i ++) {
                    var trigger = event.triggers[i];
                    document[event.add](trigger, append);
                    window[event.add](trigger, append);
                }
            }
        }
    });
})();
</script></head>
<body class="">
<header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                <img src="../../../usr/themes/jiang/img/alogo1.png" style="max-width:100px;">
                <p id="marquee" class="description"></p>
            </div>
        </div>
    </div>
</header>
<div id="body">
    
    <div class="container">
        <div class="col-group">
<script>function tg_c(id,nc){var e=document.getElementById(id);var c=e.className;if(!c){e.className=nc}else{var classArr=c.split(' ');var exist=false;for(var i=0;i<classArr.length;i++){if(classArr[i]===nc){classArr.splice(i,1);e.className=Array.prototype.join.call(classArr," ");exist=true;break}}if(!exist){classArr.push(nc);e.className=Array.prototype.join.call(classArr," ")}}}</script><div id="main">
	<div class="res-cons">
		<article class="posts">
			<h1 class="post-title">过往更新日志</h1>
			<ul class="post-meta">
			<span>2021年02月11日</span><a href="../../category/dev_log/index.htm">开发日志</a>			</ul>
			<div class="post-content">
		        <blockquote>我们一天天度过的所谓日常，也许是接连不断发生的奇迹</blockquote><p>2021.02.03 合成大雪狐上线<br>2021.02.06 域名xuehusang.cn接入合成萨摩<br><strong>2021.02.11 雪狐冰屋网站正式上线</strong><br>2021.02.18 增加实时粉丝数显示功能<br>2021.03.02 增加表情包轮播<br>2021.04.16 左下角看板娘上线（僵持两个月终于攻破moc3模型解析问题）<br>2021.04.25 wordpress驱动的提问箱上线<br>2021.07.13 冰屋主页更换色系为#4f8bae<br>2021.07.20 <a href="../../../../10W/index.htm">十万粉雪狐纪</a>页面上线<br>2021.07.20 主页壁纸板块下增加其他下载区，收录鼠标指针和搜狗输入法皮肤<br>2021.08.01 添加常见Q&A板块<br>2021.08.03 主页增加固定角落音乐播放器<br>2021.10.10 雪狐<a href="https://pic.xuehusang.cn">壁纸站点</a>上线，增加入口（因壁纸不断增加，轮播无法满足需求，单独成立新站点）<br>2021.11.02 <a href="https://rec.xuehusang.cn">自动路灯</a>上线<br>2021.12.12 自动路灯添加superchat记录专页<br>2022.01.14 冰山一角上线<br>2022.01.28 obs直播插件实时粉丝数上线<br>2022.02.09 修改版blivechat云端挂载，正式服役直播，弹幕css和贴图全部云端托管，节省开播步骤和维护成本<br>2022.03.16 obs直播插件实时粉丝数升级cluster轮询（B站api限频），查询频率提升至6s一次<br>2022.03.25 <a href="../../../../index.htm">点歌歌单</a>上线，方便歌五分钟时观众弹幕点会唱的歌曲<br>2022.04.07 <a href="https://ask.xuehusang.cn">新版棉花糖</a>上线，解决渗透漏洞，增加obs直播展示后台(10月份二周年纪念回启用）<br>2022.05.07 主页视频板块由手动修改更新为自动抓取<br>2022.05.07 主页更换新鼠标指针<br>2022.06.08 正式上线api站点，统一管理维护接口<br>2022.06.17 主页更新游戏板块布局<br>2022.06.17 紧急下线看板娘（前端泄露模型文件）<br>2022.06.18 主页按钮更新检测直播，非直播显示B站主页按钮，直播则显示标题和看过人数 <br>2022.06.19 重新上线看板娘，贴图增加版权信息（目前市面上只有米哈游自研的h5引擎可以将moc工程写进canvas达到加密效果）<br>2022.07.03 其他下载部分拆出，合并进新增的福利板块中，增加音声福利<br>2022.07.03 更新nav导航和footer友链<br>2022.07.08 云端blivechat获取弹幕头像412错误，增加header<br>2022.07.09 更新35万粉丝主题（简介时间线、banner大图、音声福利）<br>2022.07.12 冰屋架构增加企业级waf<br>2022.07.24 将视频板块自动抓取拆分为切片和唱歌两部分<br>2022.07.24 333333粉纪念回上舰电子福利页上线<br>2022.08.01 修改主页首屏浮动装饰贴图，添加彩蛋<br>2022.08.05 主站受到峰值9.8Gbps DDos，持续15分钟，共清洗2TB流量，紧急分析日志封锁异常ip<br>2022.09.06 统一<a href="../../../../gift-receive/index.htm">领取上舰电子福利</a>的项目上线<br>2022.09.25 云端blivechat获取头像再次失败，且崩溃时刷新502报错导致直播事故<br>2022.09.27 云端blivechat增加扫码登陆模块，请求头像地址接口时携带相应header解决头像无法加载问题<br>2022.10.21 狐了个狐上线，调整游戏板块布局<br>2022.10.23 冰屋主页增加二级联排按钮，调整布局<br>2022.10.25 电子福利领取页面维护：特殊码说明放至一级页面，下线忘记特殊码入口<br>2022.10.25 电子福利领取页面增加收录目录的二级页面<br>2022.10.26 换新图床，旧图床托管素材迁移<br>2022.11.08 <a href="https://xuehusang.cn/gift-track/">上舰礼物快递单号查询</a>上线<br>2022.11.14 修复了pymysql长期连接数据库自动断开导致接口500错误的问题<br>2022.11.15 将冰屋主页自动抓取封面对接cos+cdn<br>2022.12.11 上线<a href="../../../../cafe/index.htm">冰屋咖啡店</a>，整合升级舰长信息平台，并在冰屋主页替换原有入口（原有电子福利和实体快递信息项目寿命仅有三个月和一个月）<br>2022.12.12 修复弹幕姬请求头像UA被阿B拦截的问题<br>2022.12.13 修复咖啡店：后端flask高并发时变量污染导致分发登陆凭证错误的情况；后端定时校验弹幕时间过长pysql断开链接；手机端自适应文字换行问题；手机端导航栏已选中标签颜色和menu bar融合问题<br>2022.12.13 更新咖啡店公告；提高查询验证情况的频率<br>2022.12.20 架构增加JenKins优化CI/CD<br>2023.01.05 优化咖啡店后端：用户电子福利按活动时间降序排列<br>2023.01.07 完善弹幕姬获取头像机制，5w无缓存随机压测成功99%<br>2023.02.02 调整咖啡店后端实现逻辑，增加保活守护机制<br>2023.02.26 完成sso基本搭建，统一所有（几乎）内部后台认证，待接入咖啡馆<br>2023.02.28 增加咖啡店快递单号一件复制功能<br>2023.02.28 优化录播姬，由flv流换至fmp4<br>2023.03.14 优化咖啡店移动端布局，优化注册体验<br>2023.03.14 咖啡店增加半年上舰记录，uid对应昵称显示<br>2023.03.15 调整咖啡店后端架构，增加连接池<br>2023.03.20 优化主站-简介-时间线代码（前端数据挪至data return）<br>2023.03.23 冰屋咖啡店舰长周边展示页上线<br>2023.03.31 主站·直播日历后台上线<br>2023.04.01 优化核心业务故障转移机制<br>2023.04.03 主站动态直播日历上线使用<br>2023.04.11 咖啡店增加用户填写问卷状态和填写详情<br>2023.05.13 backend临时patch因B站接口更新导致的错误（快两周都没修的bson{}{}）<br>2023.05.19 开播状态和标题后端适配新接口/风控规则<br>2023.05.21 再次升级B站接口风控bypass(随机返回403)<br>2023.05.24 B站最新风控已找到稳定方法bypass，生产环境接入<br>2023.06.25 50w海报推送，复播外围技术检查<br>2023.07.03 修复冰屋弹幕姬因B站最新风控政策所导致的匿名限制（灰度）<br>2023.07.03 修复冰屋咖啡店弹幕校验部分因B站最新风控导致验证失败的问题（灰度）<br>2023.07.13 调整粉丝数数据存储结构，采样频率稳定至1分钟，obs冲粉插件升级至3秒轮询<br>2023.07.17 主站新增模型配布板块<br>2023.07.18 主站更新模型配布，完善懒加载，优化预览体验<br>2023.07.20 主站优化直播日历阅读体验<br>2023.07.20 主站前端优化，升级依赖<br>2023.07.24 咖啡店更新两场无料展示<br>2023.07.25 主站修复当一天有超过1次直播安排时，直播日历展示错误的问题（感觉修了也用不上的赶脚）<br>2023.08.02 冰屋弹幕姬更新上舰全屏特效功能<br>2023.08.27 p0事故，全部业务资源转移账号<br>2023.09.01 进一步优化弹幕姬，解决漏弹幕漏礼物情况（open-live）<br>2023.09.07 搭建<a href="https://xuehusang.network/status/igloo-open">自动化网站业务监控</a><br>2023.09.17 修复咖啡馆弹幕校验，注释误导信息<br>2023.12.07 咖啡馆再次临时停靠私信注册<br>2023.12.09 再次修复咖啡馆弹幕注册模块<br>2023.12.18 下掉咖啡馆收货card，调整页面布局</p>			</div>
		</article>
		<div id="contentid" class="none">
		<div id="comments">
        	<h3 class="widget-title">仅有 1 条评论</h3>
    <ol class="comment-list">        <li itemscope="" itemtype="http://schema.org/UserComments" id="comment-2" class="comment-body comment-parent comment-odd">
            <div class="comment-author" itemprop="creator" itemscope="" itemtype="http://schema.org/Person">
                <span itemprop="image">
                                    </span>
                <cite class="fn" itemprop="name">路过</cite>
            </div>
            <div class="comment-meta">
                <a href="comment-page-1.html#comment-2">
                    <time itemprop="commentTime" datetime="2022-12-15T10:13:41+08:00">December 15th, 2022 at 10:13 am</time>
                </a>
                            </div>
            <div class="comment-content" itemprop="commentText">
                <p>mua</p>            </div>
            <div class="comment-reply">
                <a href="comment-page-1-1.html?replyTo=2#respond-post-4" rel="nofollow" onclick="return TypechoComment.reply('comment-2', 2);">回复</a>            </div>
                    </li>
        </ol>                <div id="respond-post-4" class="respond">
        <div class="cancel-comment-reply">
        <a id="cancel-comment-reply-link" href="index.htm#respond-post-4" rel="nofollow" style="display:none" onclick="return TypechoComment.cancelReply();">取消回复</a>        </div>
    	<h3 class="widget-title">添加新评论</h3>
    	<form method="post" action="https://xuehusang.cn/develop/index.php/archives/4/comment" id="comment-form">
			<div class="col1">
			<p>
                <textarea rows="8" cols="50" name="text" class="textarea"></textarea>
            </p>
			</div>
			<div class="col2">
                		<p>
                <label for="author" class="required">称呼</label>
    			<input type="text" name="author" id="author" class="text" value="">
    		</p>
    		<p>
                <label for="mail">邮箱</label>
    			<input type="email" name="mail" id="mail" class="text" value="">
    		</p>
    		<p>
                <label for="url">网站</label>
    			<input type="url" name="url" id="url" class="text" placeholder="http://example.com" value="">
    		</p>
                		<p>
                <button type="submit" class="submit">提交评论</button>
            </p>
			</div>
			<div class="clear"></div>
    	</form>
    </div>
    </div>		</div>

</div>
</div>
<div id="secondary">
<div id="menu">
	<ul>
		<li><span><a href="../../../index.htm">首页</a></span></li>
		<li>
			<span style="cursor:pointer;">分类<i class="icon"></i></span>
			<dl>
                                                                        <dt><a href="../../category/dev_log/index.htm">开发日志</a></dt>
                                                <dt><a href="../../category/nonsense/index.htm">碎碎念</a></dt>
                        			</dl>
		</li>
		<li>
			<span style="cursor:pointer;">页面<i class="icon"></i></span>
			<dl>
                                        			</dl>
		</li>


		<li><span><a onclick="showdiv('search','showtext')"><img src="../../../usr/themes/jiang/img/icon-search.png" alt="搜索"></a></span></li>

                <form id="search" class="none" method="post" action="./">
			<input type="text" name="s" class="text" placeholder="输入关键字">	
                        <button type="submit" class="submit">搜索</button>
                </form>

		<p>
		由 <a href="http://www.typecho.org">Typecho</a> 强力驱动<br>
		<a href="https://beian.miit.gov.cn" target="_blank" class="ba">津ICP备2021001073号</a>
		</p>


	</ul>

</div>
</div>		</div>
    </div>
</div>
<footer id="footer">
	<div class="container">
		<a href="https://beian.miit.gov.cn" target="_blank" class="ba">津ICP备2021001073号</a>.By typecho
	</div>
</footer>
<footer>
<div class="tool Topen">






<div id="Tcomments" class="Tbutton">
<span class="Ticon" onclick="showdiv('contentid','showtext')" title="评论"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 30 30"><path d="M14.954 2.667C8.179 2.667 2.667 8.199 2.667 15c0 2.189.568 4.324 1.643 6.188l-1.535 5.201a.673.673 0 0 0 .836.835l5.201-1.534a12.273 12.273 0 0 0 6.142 1.643c6.826 0 12.38-5.533 12.38-12.333-.001-6.801-5.554-12.333-12.38-12.333zM6.872 20.84l-.289-.454A9.965 9.965 0 0 1 5.026 15c0-5.5 4.454-9.974 9.928-9.974C20.48 5.026 24.975 9.5 24.975 15s-4.495 9.974-10.021 9.974a9.888 9.888 0 0 1-5.34-1.557l-.453-.29-3.246.958.957-3.245z"></path></svg></span><a onclick="showdiv('contentid','showtext')" title="评论"><span id="tips" style="display: block;">1
</span></a>
</div>

<div id="Ttop" class="Tbutton">
<a class="Ticon" href="#top" title="上天" rel="external nofollow"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 30 30"><path d="M6.378 16.627l7.191-7.191v14.412c0 .728.592 1.32 1.32 1.32s1.32-.592 1.32-1.32V9.217l7.412 7.411c.497.498 1.37.498 1.867 0a1.321 1.321 0 0 0 0-1.867l-9.555-9.555c-.497-.498-1.37-.498-1.867 0L4.511 14.76a1.321 1.321 0 0 0 0 1.867c.497.498 1.37.498 1.867 0z"></path></svg></a>
</div>
</div>
</footer>

<script type="text/javascript"> 
$(function () { 
var ie6 = document.all; 
var dv = $('#menu'), st; 
dv.attr('otop', dv.offset().top); //存储原来的距离顶部的距离 
$(window).scroll(function () { 
st = Math.max(document.body.scrollTop || document.documentElement.scrollTop); 
if (st > parseInt(dv.attr('otop'))) { 
if (ie6) {//IE6不支持fixed属性，所以只能靠设置position为absolute和top实现此效果 
dv.css({ position: 'absolute', top: st }); 
} 
else if (dv.css('position') != 'fixed') dv.css({ 'position': 'fixed', top: 0 }); 
} else if (dv.css('position') != 'static') dv.css({ 'position': 'static' }); 
}); 
}); 
</script> 

<script type="text/javascript">
$(function(){

	$("#secondary ul li").click(function(){
		$(this).find("dl").slideToggle(200).parent().siblings().find("dl").slideUp(200);
		$(this).find("span i").toggleClass('action').parents().siblings().find("span i").removeClass('action');
	})
})
</script>

<script language="JavaScript" type="text/JavaScript">
function showdiv(targetid,objN){
   
      var target=document.getElementById(targetid);
      var clicktext=document.getElementById(objN)

            if (target.style.display=="block"){
                target.style.display="none";
                clicktext.innerText="Open DIV";
  

            } else {
                target.style.display="block";
                clicktext.innerText='Close DIV';
            }
   
}
</script>

<script type="text/javascript">
(function ($, window) {
$(function() {
  var $a = $('.archives-content'),
  $m = $('.al_mon', $a),
  $l = $('.al_post_list', $a),
  $l_f = $('.al_post_list:first', $a);
  $l.hide();$l_f.show();
  $r = $('.a_post_list', $a),
  $r_f = $('.a_post_list:first', $a);
  $r.hide();$r_f.show();
  $m.css('cursor', 'pointer').on('click', function(){
    $(this).next().slideToggle(400);
  });
  var animate = function(index, status, s) {
    if (index > $l.length) { return; }
    if (status == 'up') {
      $l.eq(index).slideUp(s, function() {
        animate(index+1, status, (s-10<1)?0:s-10);
      });
    } else {
      $l.eq(index).slideDown(s, function() {
        animate(index+1, status, (s-10<1)?0:s-10);
      });
    }
  };
});
})(jQuery, window);
</script>

<script type="text/javascript">
var marquee = function (r) {
        function t() {
            return b[Math.floor(Math.random() * b.length)]
        }
        function e() {
            return String.fromCharCode(94 * Math.random() + 33)
        }
        function n(r) {
            for (var n = document.createDocumentFragment(), i = 0; r > i; i++) {
                var l = document.createElement("span");
                l.textContent = e(), l.style.color = t(), n.appendChild(l)
            }
            return n
        }
        function i() {
            var t = o[c.skillI];
            c.step ? c.step-- : (c.step = g, c.prefixP < l.length ? (c.prefixP >= 0 && (c.text += l[c.prefixP]), c.prefixP++) : "forward" === c.direction ? c.skillP < t.length ? (c.text += t[c.skillP], c.skillP++) : c.delay ? c.delay-- : (c.direction = "backward", c.delay = a) : c.skillP > 0 ? (c.text = c.text.slice(0, -1), c.skillP--) : (c.skillI = (c.skillI + 1) % o.length, c.direction = "forward")), r.textContent = c.text, r.appendChild(n(c.prefixP < l.length ? Math.min(s, s + c.prefixP) : Math.min(s, t.length - c.skillP))), setTimeout(i, d)
        }
    var l = "The best or ",
        o = ["nothing"].map(function (r)
        {
            return r + ""
        }), a = 2, g = 1, s = 5, d = 75,
        b = ["rgb(110,64,170)", "rgb(150,61,179)", "rgb(191,60,175)", "rgb(228,65,157)", "rgb(254,75,131)", "rgb(255,94,99)", "rgb(255,120,71)", "rgb(251,150,51)", "rgb(226,183,47)", "rgb(198,214,60)", "rgb(175,240,91)", "rgb(127,246,88)", "rgb(82,246,103)", "rgb(48,239,130)", "rgb(29,223,163)", "rgb(26,199,194)", "rgb(35,171,216)", "rgb(54,140,225)", "rgb(76,110,219)", "rgb(96,84,200)"],
        c = {text: "", prefixP: -s, skillI: 0, skillP: 0, direction: "forward", delay: a, step: g};
    i()
};
marquee(document.getElementById('marquee'));
</script>

 <script type="text/javascript">
 $(document).ready(function(){
  $(function () {
    $("#Ttop ").click(function(){
    $('body,html').animate({scrollTop:0},"speed");
    return false;
    });
    });
    });
 </script>

 <script type="text/javascript">
function switchReadMode() { //切换显示模式
    var btn = $('.btn-read-mode');
    var next_mode = $('body').hasClass('night-mode') ? 'day': 'night';
    var mode = next_mode == 'day' ? '': 'night-mode';
    var icon = next_mode == 'day' ? 'fa fa-sun-o': 'fa fa-moon-o';
    if (next_mode == 'day') {
        $('body').removeClass('night-mode');
    } else {
        $('body').addClass('night-mode');
    }
    btn.find('i').attr('class', icon);
    setCookie("read-mode", next_mode);
}

$('.btn-read-mode').click(function(e) {
    e.preventDefault();//阻止点击打开超链接"#"事件
    switchReadMode();
});//这个触发事件主体


function setCookie(name,value) 
{ 
    var Days = 30; 
    var exp = new Date(); 
    exp.setTime(exp.getTime() + Days*24*60*60*1000);
    var path = ';path=/'; 
    document.cookie = name + "="+ escape (value) + ";expires=" + exp.toGMTString() + path; 
} 

 </script>
    <script>
        $(function() {

            $("#pay").click(function() {
                $("#pay").fadeOut("slow");
            })
            $("#code").click(function() {
                $("#code").fadeOut("slow");
            })
        });
    </script>
</body>
</html>